<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The smithy</title>
<style>
#smithy{
margin-top: 400px;}
#vocabuluggage{
margin-left: 1400px ;}
.emptyRoom{
margin-left: 1413px ;}
#anvil{
font-family: monospace;
white-space: pre;
cursor: pointer;
margin-left: 670px;
margin-top: 434.5px;}
#String{
letter-spacing: 30px;}
#forgeButton{
display: none;
margin-left: 714px;}
#feedback{
margin-left: 530px;}
#outside{
margin-left: 1400px;}
.WebContainer{
width:100%;
height:auto;}
</style>
</head>
<body>
<button onclick="window.location.href='vocabuluggage.html';" id="vocabuluggage";>Your Vocabuluggage</button>
<button onclick="window.location.href='emptyRoom.html';" class="emptyRoom";>An empty room</button>
<button onclick="window.location.href='emptyRoom.html';" class="emptyRoom";>An empty room</button>
<button onclick="window.location.href='emptyRoom.html';" class="emptyRoom";>An empty room</button>
<p id="info">You can use letters you collect to forge items on the word anvil.<br>
Do this by clicking it and then typing out some of the letters you own.<br>
You can view your letters in your vocabuluggage</p>
<div id="smithy">
<p id="feedback"></p>
<p id="String"></p>
</div>
<p id="anvil" onclick="if (anvil == false) {anvil = true;document.getElementById('feedback').innerHTML = '';document.getElementById('anvil').style.marginTop = '434.5px';document.getElementById('feedback').style.marginLeft = '530px';}">
   .-------..___
   '-._     :_.-'
       ) _ (
      '-' '-'
</p>
<button id="forgeButton" onclick="forgeButton();">Forge!</button>
<button id="outside" onclick="window.location.href='outside.html'">Leave this place</button> 
<script>
if (localStorage.getItem('Items').includes('sword') == true) {
document.getElementById('outside').style.display = 'inline';
} else {
document.getElementById('outside').style.display = 'none';}
var anvil = false;
var string = '';
document.onkeydown = typeSession
let vocab =  localStorage.getItem("letters");
function typeSession(){
if (anvil == true) {
let type = window.event.which;
if (vocab.includes(String.fromCharCode(type+32)) == true,vocab.split(String.fromCharCode(type+32)).length-1 - string.split(String.fromCharCode(type+32)).length-1 == -1) {
document.getElementById('anvil').style.marginTop = '0px';
document.getElementById('forgeButton').style.display = 'inline';
string += String.fromCharCode(type+32);
document.getElementById('String').style.marginLeft = (740 - ((string.length - 1) * 20) +'px');}
document.getElementById("String").innerHTML = string;}}
function forgeButton() {
document.getElementById('forgeButton').style.display = 'none';
if (string === 'sword') {
localStorage.setItem("Items",string+" ");
document.getElementById('feedback').style.marginLeft = '706px'
document.getElementById('feedback').style.marginTop = '471px'
document.getElementById('feedback').innerHTML = 'Impressive';
document.getElementById("outside").style.display = 'inline';
document.getElementById("info").style.display = 'none';
for (let Length = string.length + 1;Length --; Length >= 0) {
localStorage.setItem('letters',localStorage.getItem('letters').replace(string.substr(Length,1),''));}
} else {
document.getElementById('feedback').innerHTML = 'Thats not a very helpful word right now. Maybe try a different one';}
string = '';
anvil = false;
document.getElementById('String').innerHTML = string;}
</script>
</body>
</html>
